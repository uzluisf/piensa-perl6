% LaTeX source for ``Think Perl 6: How to Think Like a Computer Scientist''

% Copyright (c)  2017  Allen B. Downey and Laurent Rosenfeld.

% License: Creative Commons Attribution-NonCommercial 3.0 Unported License.
% http://creativecommons.org/licenses/by-nc/3.0/
%

%documentclass[10pt,b5paper]{book}
\documentclass[10pt]{book}
\usepackage[width=5.5in,height=8.5in,
  hmarginratio=3:2,vmarginratio=1:1]{geometry}

% for some of these packages, you might have to install
% texlive-latex-extra (in Ubuntu)
 
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{mathpazo}
\usepackage{url}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amsthm}
%\usepackage{amssymb}
\usepackage{exercise}                   % texlive-latex-extra
\usepackage{makeidx}
%\usepackage{makeidx,showidx}
\usepackage{setspace}
\usepackage{hevea}                           
\usepackage{upquote}
\usepackage{appendix}
\usepackage[bookmarks]{hyperref}
\usepackage[spanish,english]{babel}
\usepackage[mathletters]{ucs}
\usepackage[utf8x]{inputenc}
\usepackage{fancyvrb}
\usepackage{pdfpages}
%\usepackage{moreverb}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{textcomp}

\title{Piensa en Perl 6}
\author{Laurent Rosenfeld, con Allen B. Downey }
\newcommand{\thetitle}{Piensa en Perl 6: Cómo Pensar Como un Científico de la Computación}
\newcommand{\theversion}{1era Edición, Versión 0.5.3}
\newcommand{\thedate}{Agosto 2017}

% these styles get translated in CSS for the HTML version
\newstyle{a:link}{color:black;}
\newstyle{p+p}{margin-top:1em;margin-bottom:1em}
\newstyle{img}{border:0px}

% define verbatim environment with a left margin
\DefineVerbatimEnvironment{verbatim}{Verbatim}{xleftmargin=.3in}

% change the arrows
\setlinkstext
  {\imgsrc[ALT="Previous"]{back.png}}
  {\imgsrc[ALT="Up"]{up.png}}
  {\imgsrc[ALT="Next"]{next.png}}

\setcounter{secnumdepth}{3}

\makeindex

\newif\ifplastex
\plastexfalse

% Change the word ´Chapter´ to ´Capítulo´
\addto\captionsenglish{\renewcommand{\chaptername}{Capítulo}}

% Source code color
\definecolor{SlangOnyx}{rgb}{0.06, 0.06, 0.06}
\definecolor{SlangCharcoal}{rgb}{0.21, 0.27, 0.31}
\definecolor{SlangGray}{rgb}{0.41, 0.41, 0.41}
\definecolor{SlangCerulean}{rgb}{0.0, 0.48, 0.65}
\definecolor{SlangNapier}{rgb}{0.16, 0.5, 0.0}
\definecolor{SlangCopper}{rgb}{0.85, 0.54, 0.4}
\definecolor{SlangPersimmon}{rgb}{0.93, 0.35, 0.0}
\definecolor{SlangMajorblue}{rgb}{0.38, 0.31, 0.86}

\lstset{
  % Perl syntax highlighter
	language=Perl,
    columns=fixed,
    xleftmargin=21.6pt,
    showstringspaces=false,
	showtabs=false,
	showspaces=false,
    sensitive=true,
    extendedchars=true,
    morecomment=[l],
    morestring=[d]{'},
    morestring=[d]{"},
    % Perl 6 Keywords
    morekeywords={BEGIN, CATCH, CHECK, CONTROL, END, ENTER, FIRST, INIT, KEEP, LAST, LEAVE,
        NEXT, POST, PRE, START, TEMP, UNDO, as, assoc, async, augment, binary,
        break, but, cached, category, class, constant, contend, continue, copy,
        deep, default, defequiv, defer, die, do, else, elsif, enum, equiv, exit,
        export, fail, fatal, for, gather, given, goto, grammar, handles, has,
        if, inline, irs, is, last, leave, let, lift, loop, looser, macro, make,
        maybe, method, module, multi, my, next, of, ofs, only, oo, ors, our,
        package, parsed, prec, proto, readonly, redo, ref, regex, reparsed, repeat,
        require, required, return, returns, role, rule, rw, self, slang, state,
        sub, submethod, subset, supersede, take, temp, tighter, token, trusts,
        try, unary, unless, until, use, warn, when, where, while, will},
    % Perl 6 Builtins
    emph={ACCEPTS, HOW, REJECTS, VAR, WHAT, WHENCE, WHERE, WHICH, WHO, abs, acos,
        acosec, acosech, acosh, acotan, acotanh, all, any, approx, arity, asec,
        asech, asin, asinh, assuming, atan, atan2, atanh, attr, bless, body, by,
        bytes, caller, callsame, callwith, can, capitalize, cat, ceiling, chars,
        chmod, chomp, chop, chr, chroot, circumfix, cis, classify, clone, close,
        cmp_ok, codes, comb, connect, contains, context, cos, cosec, cosech, cosh,
        cotan, cotanh, count, defined, delete, diag, dies_ok, does, e, each,
        eager, elems, end, eof, eval, eval_dies_ok, eval_elsewhere, eval_lives_ok,
        evalfile, exists, exp, first, flip, floor, flunk, flush, fmt, force_todo,
        fork, from, getc, gethost, getlogin, getpeername, getpw, gmtime, graphs,
        grep, hints, hyper, im, index, infix, invert, is_approx, is_deeply, isa,
        isa_ok, isnt, iterator, join, key, keys, kill, kv, lastcall, lazy, lc,
        lcfirst, like, lines, link, lives_ok, localtime, log, log10, map, max,
        min, minmax, name, new, nextsame, nextwith, nfc, nfd, nfkc, nfkd,
        nok_error, nonce, none, normalize, not, nothing, ok, once, one, open,
        opendir, operator, ord, p5chomp, p5chop, pack, pair, pairs, pass, perl,
        pi, pick, plan, plan_ok, polar, pop, pos, postcircumfix, postfix, pred,
        prefix, print, printf, push, quasi, quotemeta, rand, re, read, readdir,
        readline, reduce, reverse, rewind, rewinddir, rindex, roots, round,
        roundrobin, run, runinstead, sameaccent, samecase, say, sec, sech,
        sech, seek, shape, shift, sign, signature, sin, sinh, skip, skip_rest,
        sleep, slurp, sort, splice, split, sprintf, sqrt, srand, strand, subst,
        substr, succ, sum, symlink, tan, tanh, throws_ok, time, times, to, todo,
        trim, trim_end, trim_start, true, truncate, uc, ucfirst, undef, undefine,
        uniq, unlike, unlink, unpack, unpolar, unshift, unwrap, use_ok, value,
        values, vec, version_lt, void, wait, want, wrap, write, zip},
    emphstyle=\color{SlangMajorblue},%
   % Perl 6 Operators
    emph={[2]X, Z, after, also, and, andthen, before, cmp, div, eq, eqv, extra,
        ff, fff, ge, gt, le, leg, lt, m, mm, mod, ne, or, orelse, rx, s, tr,
        x, xor, xx, ++, --, **, !, +, -, ~, ?, |, ||, +^, ~^, ?^, ^, *, /, %,
        %%, +&, +<, +>, ~&, ~<, ~>, ?&, gcd, lcm, +, -, +|, +^, ~|, ~^, ?|, ?^,
        ~, &, ^, but, does, <=>, .., ..^, ^.., ^..^, !=, ==, <, <=, >, >=, ~~,
        ===, !eqv, &&, ||, ^^, //, min, max, ??, !!, ff, fff, so, not, <==,
        ==>, <<==, ==>>},
    emphstyle=[2]\color{SlangPersimmon},%
    % Perl 6 Builtin Classes
    emph={[3]Abstraction, Any, AnyChar, Array, Associative, Bag, Bit, Blob, Block,
        Bool, Buf, Byte, Callable, Capture, Char, Class, Code, Codepoint, Comparator,
        Complex, Decreasing, Exception, Failure, False, Grammar, Grapheme, Hash, IO,
        Increasing, Int, Junction, KeyBag, KeyExtractor, KeyHash, KeySet, KitchenSink,
        List, Macro, Mapping, Match, Matcher, Method, Module, Num, Object, Ordered,
        Ordering, OrderingPair, Package, Pair, Positional, Proxy, Range, Rat, Regex,
        Role, Routine, Scalar, Seq, Set, Signature, Str, StrLen, StrPos, Sub,
        Submethod, True, UInt, Undef, Version, Void, Whatever, bit, bool, buf, buf1,
        buf16, buf2, buf32, buf4, buf64, buf8, complex, int, int1, int16, int2,
        int32, int4, int64, int8, num, rat, rat1, rat16, rat2, rat32, rat4,
        rat64, rat8, uint, uint1, uint16, uint2, uint32, uint4, uint64, uint8,
        utf16, utf32, utf8},
    emphstyle=[3]\color{SlangMajorblue},%
    emph={[4]u'\u0028': u'\u0029', u'\u003c': u'\u003e', u'\u005b': u'\u005d',
        u'\u007b': u'\u007d', u'\u00ab': u'\u00bb', u'\u0f3a': u'\u0f3b',
        u'\u0f3c': u'\u0f3d', u'\u169b': u'\u169c', u'\u2018': u'\u2019',
        u'\u201a': u'\u2019', u'\u201b': u'\u2019', u'\u201c': u'\u201d',
        u'\u201e': u'\u201d', u'\u201f': u'\u201d', u'\u2039': u'\u203a',
        u'\u2045': u'\u2046', u'\u207d': u'\u207e', u'\u208d': u'\u208e',
        u'\u2208': u'\u220b', u'\u2209': u'\u220c', u'\u220a': u'\u220d',
        u'\u2215': u'\u29f5', u'\u223c': u'\u223d', u'\u2243': u'\u22cd',
        u'\u2252': u'\u2253', u'\u2254': u'\u2255', u'\u2264': u'\u2265',
        u'\u2266': u'\u2267', u'\u2268': u'\u2269', u'\u226a': u'\u226b',
        u'\u226e': u'\u226f', u'\u2270': u'\u2271', u'\u2272': u'\u2273',
        u'\u2274': u'\u2275', u'\u2276': u'\u2277', u'\u2278': u'\u2279',
        u'\u227a': u'\u227b', u'\u227c': u'\u227d', u'\u227e': u'\u227f',
        u'\u2280': u'\u2281', u'\u2282': u'\u2283', u'\u2284': u'\u2285',
        u'\u2286': u'\u2287', u'\u2288': u'\u2289', u'\u228a': u'\u228b',
        u'\u228f': u'\u2290', u'\u2291': u'\u2292', u'\u2298': u'\u29b8',
        u'\u22a2': u'\u22a3', u'\u22a6': u'\u2ade', u'\u22a8': u'\u2ae4',
        u'\u22a9': u'\u2ae3', u'\u22ab': u'\u2ae5', u'\u22b0': u'\u22b1',
        u'\u22b2': u'\u22b3', u'\u22b4': u'\u22b5', u'\u22b6': u'\u22b7',
        u'\u22c9': u'\u22ca', u'\u22cb': u'\u22cc', u'\u22d0': u'\u22d1',
        u'\u22d6': u'\u22d7', u'\u22d8': u'\u22d9', u'\u22da': u'\u22db',
        u'\u22dc': u'\u22dd', u'\u22de': u'\u22df', u'\u22e0': u'\u22e1',
        u'\u22e2': u'\u22e3', u'\u22e4': u'\u22e5', u'\u22e6': u'\u22e7',
        u'\u22e8': u'\u22e9', u'\u22ea': u'\u22eb', u'\u22ec': u'\u22ed',
        u'\u22f0': u'\u22f1', u'\u22f2': u'\u22fa', u'\u22f3': u'\u22fb',
        u'\u22f4': u'\u22fc', u'\u22f6': u'\u22fd', u'\u22f7': u'\u22fe',
        u'\u2308': u'\u2309', u'\u230a': u'\u230b', u'\u2329': u'\u232a',
        u'\u23b4': u'\u23b5', u'\u2768': u'\u2769', u'\u276a': u'\u276b',
        u'\u276c': u'\u276d', u'\u276e': u'\u276f', u'\u2770': u'\u2771',
        u'\u2772': u'\u2773', u'\u2774': u'\u2775', u'\u27c3': u'\u27c4',
        u'\u27c5': u'\u27c6', u'\u27d5': u'\u27d6', u'\u27dd': u'\u27de',
        u'\u27e2': u'\u27e3', u'\u27e4': u'\u27e5', u'\u27e6': u'\u27e7',
        u'\u27e8': u'\u27e9', u'\u27ea': u'\u27eb', u'\u2983': u'\u2984',
        u'\u2985': u'\u2986', u'\u2987': u'\u2988', u'\u2989': u'\u298a',
        u'\u298b': u'\u298c', u'\u298d': u'\u298e', u'\u298f': u'\u2990',
        u'\u2991': u'\u2992', u'\u2993': u'\u2994', u'\u2995': u'\u2996',
        u'\u2997': u'\u2998', u'\u29c0': u'\u29c1', u'\u29c4': u'\u29c5',
        u'\u29cf': u'\u29d0', u'\u29d1': u'\u29d2', u'\u29d4': u'\u29d5',
        u'\u29d8': u'\u29d9', u'\u29da': u'\u29db', u'\u29f8': u'\u29f9',
        u'\u29fc': u'\u29fd', u'\u2a2b': u'\u2a2c', u'\u2a2d': u'\u2a2e',
        u'\u2a34': u'\u2a35', u'\u2a3c': u'\u2a3d', u'\u2a64': u'\u2a65',
        u'\u2a79': u'\u2a7a', u'\u2a7d': u'\u2a7e', u'\u2a7f': u'\u2a80',
        u'\u2a81': u'\u2a82', u'\u2a83': u'\u2a84', u'\u2a8b': u'\u2a8c',
        u'\u2a91': u'\u2a92', u'\u2a93': u'\u2a94', u'\u2a95': u'\u2a96',
        u'\u2a97': u'\u2a98', u'\u2a99': u'\u2a9a', u'\u2a9b': u'\u2a9c',
        u'\u2aa1': u'\u2aa2', u'\u2aa6': u'\u2aa7', u'\u2aa8': u'\u2aa9',
        u'\u2aaa': u'\u2aab', u'\u2aac': u'\u2aad', u'\u2aaf': u'\u2ab0',
        u'\u2ab3': u'\u2ab4', u'\u2abb': u'\u2abc', u'\u2abd': u'\u2abe',
        u'\u2abf': u'\u2ac0', u'\u2ac1': u'\u2ac2', u'\u2ac3': u'\u2ac4',
        u'\u2ac5': u'\u2ac6', u'\u2acd': u'\u2ace', u'\u2acf': u'\u2ad0',
        u'\u2ad1': u'\u2ad2', u'\u2ad3': u'\u2ad4', u'\u2ad5': u'\u2ad6',
        u'\u2aec': u'\u2aed', u'\u2af7': u'\u2af8', u'\u2af9': u'\u2afa',
        u'\u2e02': u'\u2e03', u'\u2e04': u'\u2e05', u'\u2e09': u'\u2e0a',
        u'\u2e0c': u'\u2e0d', u'\u2e1c': u'\u2e1d', u'\u2e20': u'\u2e21',
        u'\u3008': u'\u3009', u'\u300a': u'\u300b', u'\u300c': u'\u300d',
        u'\u300e': u'\u300f', u'\u3010': u'\u3011', u'\u3014': u'\u3015',
        u'\u3016': u'\u3017', u'\u3018': u'\u3019', u'\u301a': u'\u301b',
        u'\u301d': u'\u301e', u'\ufd3e': u'\ufd3f', u'\ufe17': u'\ufe18',
        u'\ufe35': u'\ufe36', u'\ufe37': u'\ufe38', u'\ufe39': u'\ufe3a',
        u'\ufe3b': u'\ufe3c', u'\ufe3d': u'\ufe3e', u'\ufe3f': u'\ufe40',
        u'\ufe41': u'\ufe42', u'\ufe43': u'\ufe44', u'\ufe47': u'\ufe48',
        u'\ufe59': u'\ufe5a', u'\ufe5b': u'\ufe5c', u'\ufe5d': u'\ufe5e',
        u'\uff08': u'\uff09', u'\uff1c': u'\uff1e', u'\uff3b': u'\uff3d',
        u'\uff5b': u'\uff5d', u'\uff5f': u'\uff60', u'\uff62': u'\uff63',
    }
    emphstyle=[4]\color{SlangCopper},%
    basicstyle=\color{SlangOnyx}\small\ttfamily,
    identifierstyle=\color{SlangOnyx},
    keywordstyle=\color{SlangCerulean}\bfseries,
    stringstyle=\color{SlangNapier},
    commentstyle=\color{SlangCharcoal}\itshape,
}


\begin{document}

\frontmatter

% insert cover page
\includepdf{figs/thinkperl6_cover.pdf} 

% PLASTEX ONLY
\ifplastex
    \usepackage{localdef}
    \maketitle

\newcount\anchorcnt
\newcommand*{\Anchor}[1]{%
  \@bsphack%
    \Hy@GlobalStepCount\anchorcnt%
    \edef\@currentHref{anchor.\the\anchorcnt}% 
    \Hy@raisedlink{\hyper@anchorstart{\@currentHref}\hyper@anchorend}% 
    \M@gettitle{}\label{#1}% 
    \@esphack%
}


\else
% skip the following for plastex

\newtheorem{exercise}{Ejercicio}[chapter]

% LATEXONLY

\input{latexonly}

\begin{latexonly}

\renewcommand{\blankpage}{\thispagestyle{empty} \quad \newpage}

%\blankpage
%\blankpage

% TITLE PAGES FOR LATEX VERSION

%-half title--------------------------------------------------
\thispagestyle{empty}

\begin{flushright}
\vspace*{2.0in}

\begin{spacing}{3}
{\huge Piensa en Perl 6}\\
{\Large Cómo Pensar Como un Científico de la Computación}
\end{spacing}

\vspace{0.25in}

\theversion

\thedate

\vfill

\end{flushright}

%--verso------------------------------------------------------

\blankpage
\blankpage
%\clearemptydoublepage
%\pagebreak
%\thispagestyle{empty}
%\vspace*{6in}

%--title page--------------------------------------------------
\pagebreak
\thispagestyle{empty}

\begin{flushright}
\vspace*{2.0in}

\begin{spacing}{3}
{\huge Piensa en Perl 6}\\
{\Large Cómo Pensar Como un Científico de la Computación}
\end{spacing}

\vspace{0.25in}

\theversion

\thedate

\vspace{1in}


{\Large
Laurent Rosenfeld,
con Allen B. Downey\\
}


\vspace{0.5in}

{\Large Green Tea Press}

{\small Needham, Massachusetts}

%\includegraphics[width=1in]{figs/logo1.pdf}
\vfill

\end{flushright}


%--copyright--------------------------------------------------
\pagebreak
\thispagestyle{empty}

{\small
Copyright \copyright ~2017 Allen Downey, Laurent Rosenfeld.


\vspace{0.2in}

\begin{flushleft}
Green Tea Press       \\
9 Washburn Ave        \\
Needham MA 02492
\end{flushleft}

Se concede permiso para copiar, distribuir y/o modificar
este documento bajo los términos de Creative Commons Attribution-NonCommercial 3.0 Unported
License, la cual está disponible en \url{http://creativecommons.org/licenses/by-nc/3.0/}.

La forma original de este libro es código fuente \LaTeX\ . La compilación de
este código \LaTeX\ tiene el efecto de generar una representación independiente
a cualquier dispositivo de este libro de texto, la cual puede ser convertida a
otros formatos e imprimida.

El código \LaTeX\ de este libro está disponible en
\url{https://github.com/LaurentRosenfeld/thinkperl6/}

\vspace{0.2in}

} % end small

\end{latexonly}


% HTMLONLY

\begin{htmlonly}

% TITLE PAGE FOR HTML VERSION

{\Large \thetitle}

{\large Laurent Rosenfeld,
con Allen B. Downey}

\theversion

\thedate

\setcounter{chapter}{-1}

\end{htmlonly}

\fi
% END OF THE PART WE SKIP FOR PLASTEX

% \include{preface.tex}
\input{preface}

% START THE BOOK
\mainmatter

\part{Comenzando con lo Básico}

\input{intro_part_1.tex}

\input{way_of_program}

\input{var_expr_statements}

\input{functions}

\input{loops_cond_recursion}

\input{fruit_functions}

\input{iteration}

\input{strings}

\input{cs_wordplay}

\input{arrays_and_lists}

\input{hashes}

\input{cs_data_st_selection}


\part{Hacia Adelante}

\include{intro_part_2}

\input{classes_and_objects}

\input{grammars_and_regex}

\input{functional_programming}

\input{conclusion}

\appendix

\input{appendix_solutions}

\printindex

%\clearemptydoublepage
%\clearemptydoublepage
%\blankpage
%\blankpage
%\blankpage


\end{document}

